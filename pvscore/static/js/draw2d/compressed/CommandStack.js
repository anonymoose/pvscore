/**
This notice must be untouched at all times.
This is the COMPRESSED version of Draw2D
WebSite: http://www.draw2d.org
Copyright: 2006 Andreas Herz. All rights reserved.
Created: 5.11.2006 by Andreas Herz (Web: http://www.freegroup.de )
LICENSE: LGPL
**/

CommandStack=function(){this.undostack=[];this.redostack=[];this.maxundo=50;this.eventListeners=new ArrayList();};CommandStack.PRE_EXECUTE=1;CommandStack.PRE_REDO=2;CommandStack.PRE_UNDO=4;CommandStack.POST_EXECUTE=8;CommandStack.POST_REDO=16;CommandStack.POST_UNDO=32;CommandStack.POST_MASK=CommandStack.POST_EXECUTE|CommandStack.POST_UNDO|CommandStack.POST_REDO;CommandStack.PRE_MASK=CommandStack.PRE_EXECUTE|CommandStack.PRE_UNDO|CommandStack.PRE_REDO;CommandStack.prototype.type="CommandStack";CommandStack.prototype.setUndoLimit=function(_84c){this.maxundo=_84c;};CommandStack.prototype.markSaveLocation=function(){this.undostack=[];this.redostack=[];};CommandStack.prototype.execute=function(_84d){if(_84d===null){return;}if(_84d.canExecute()==false){return;}this.notifyListeners(_84d,CommandStack.PRE_EXECUTE);this.undostack.push(_84d);_84d.execute();this.redostack=[];if(this.undostack.length>this.maxundo){this.undostack=this.undostack.slice(this.undostack.length-this.maxundo);}this.notifyListeners(_84d,CommandStack.POST_EXECUTE);};CommandStack.prototype.undo=function(){var _84e=this.undostack.pop();if(_84e){this.notifyListeners(_84e,CommandStack.PRE_UNDO);this.redostack.push(_84e);_84e.undo();this.notifyListeners(_84e,CommandStack.POST_UNDO);}};CommandStack.prototype.redo=function(){var _84f=this.redostack.pop();if(_84f){this.notifyListeners(_84f,CommandStack.PRE_REDO);this.undostack.push(_84f);_84f.redo();this.notifyListeners(_84f,CommandStack.POST_REDO);}};CommandStack.prototype.canRedo=function(){return this.redostack.length>0;};CommandStack.prototype.canUndo=function(){return this.undostack.length>0;};CommandStack.prototype.addCommandStackEventListener=function(_850){this.eventListeners.add(_850);};CommandStack.prototype.removeCommandStackEventListener=function(_851){this.eventListeners.remove(_851);};CommandStack.prototype.notifyListeners=function(_852,_853){var _854=new CommandStackEvent(_852,_853);var size=this.eventListeners.getSize();for(var i=0;i<size;i++){this.eventListeners.get(i).stackChanged(_854);}};